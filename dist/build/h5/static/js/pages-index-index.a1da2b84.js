(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"1a49":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"content-text"},[i("v-uni-view",{staticClass:"content-text-conr"},t._l(t.msg_list,function(e,a){return"msg_onetoone"!=e.msg_type?i("v-uni-view",{key:a,staticClass:"text-item-all"},["msg"!=e.msg_type?i("v-uni-view",{staticClass:"msg-sysmsg"},[t._v(t._s(e.msg))]):i("v-uni-view",{staticClass:"text-msg"},[t.data.token!=e.user_info.token?i("v-uni-view",{staticClass:"text-item"},[i("v-uni-view",{staticClass:"text-item-uinfo"},[i("v-uni-view",{staticClass:"text-item-img"},[i("v-uni-image",{attrs:{src:e.user_info.images,mode:""}})],1),i("v-uni-text",[t._v(t._s(e.user_info.nickname))])],1),i("v-uni-view",{staticClass:"msg-l"},[t._v(t._s(e.msg))])],1):i("v-uni-view",{staticClass:"text-item-r"},[i("v-uni-view",{staticClass:"text-item-r-uinfo"},[i("v-uni-view",{staticClass:"text-item-r-img"},[i("v-uni-image",{attrs:{src:e.user_info.images,mode:""}})],1),i("v-uni-text",[t._v(t._s(e.user_info.nickname))])],1),i("v-uni-view",{staticClass:"msg-r"},[t._v(t._s(e.msg))])],1)],1)],1):t._e()}),1),i("v-uni-view",{staticClass:"content-text-user"},[i("v-uni-view",{staticClass:"content-user-item-all"},[t._v("群聊用户")]),t._l(t.user_list,function(e,a){return i("v-uni-view",{key:a,staticClass:"content-user-item",on:{click:function(i){i=t.$handleEvent(i),t.ontono(e)}}},[t._v(t._s(e.nickname)),i("v-uni-text",{domProps:{innerHTML:t._s(t.is_user_msg(e))}})],1)})],2)],1),i("v-uni-view",{staticClass:"btn-input"},[i("v-uni-form",{on:{submit:function(e){e=t.$handleEvent(e),t.formSubmit(e)},reset:function(e){e=t.$handleEvent(e),t.formReset(e)}}},[i("v-uni-view",{staticClass:"uni-form-item uni-column"},[i("v-uni-input",{staticClass:"uni-input",attrs:{name:"msg",placeholder:"内容"},model:{value:t.data.msg,callback:function(e){t.$set(t.data,"msg",e)},expression:"data.msg"}})],1),i("v-uni-view",{staticClass:"uni-btn-v"},[i("v-uni-button",{attrs:{formType:"submit"}},[t._v("发送消息")]),i("v-uni-button",{attrs:{type:"default",formType:"reset"}},[t._v("重置")])],1)],1)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},2282:function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f499")),o={data:function(){return{data:{msg:"",token:""},msg_list:getApp().globalData.ws.msg_list,user_list:getApp().globalData.ws.user_list,ws:getApp().globalData.ws,chosen:""}},onLoad:function(t){var e=this;uni.getStorage({key:"token",success:function(t){e.data.token=t.data}})},onUnload:function(){console.info("退出"),uni.setStorage({key:"msg_list",data:"11"})},onShow:function(){},methods:{formSubmit:function(t){this.data.msg&&this.data.token&&(this.ws.ws_send(this.data.msg,2,this.data.token),this.data.msg=""),this.$forceUpdate()},formReset:function(t){console.log("清空数据  "),this.chosen=""},ontono:function(t){this.data.token!==t.token&&uni.setStorage({key:"private_uinfo",data:(0,n.default)(t),success:function(){uni.navigateTo({url:"/pages/private/private"})}})}},computed:{is_user_msg:function(){return function(t){for(var e=this,i="",a=void 0==e.ws.ono_over_time[t.token]?"1999-01-01 00:00:01":e.ws.ono_over_time[t.token],n=0;n<e.msg_list.length;n++)"msg_onetoone"==e.msg_list[n].msg_type&&e.msg_list[n].createdate>a&&e.msg_list[n].user_info.token===t.token&&e.msg_list[n].to_token==e.data.token&&(""==i?i=1:i++);return""!=i&&(i='<text class="weidu-msg">'+i+"</text>"),i}}}};e.default=o},5771:function(t,e,i){"use strict";i.r(e);var a=i("1a49"),n=i("aad3");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("d216");var s=i("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"205818db",null);e["default"]=r.exports},aad3:function(t,e,i){"use strict";i.r(e);var a=i("2282"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},d216:function(t,e,i){"use strict";var a=i("e759"),n=i.n(a);n.a},e759:function(t,e,i){var a=i("f322");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("678c2068",a,!0,{sourceMap:!1,shadowMode:!1})},f322:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'.content[data-v-205818db]{width:100%;height:100%;overflow:hidden}.content-text[data-v-205818db]{width:calc(100% %?-2?%);height:%?1000?%;border:%?1?% solid #2c405a;background:#fff;margin-top:%?20?%;overflow:hidden}.content-text .content-text-conr[data-v-205818db]{width:calc(80% - %?1?%);height:100%;display:block;overflow-y:auto;padding-bottom:%?-40?%;overflow-x:hidden;float:left;border-right:%?1?% solid #2c405a}.content-text .content-text-user[data-v-205818db]{width:20%;float:left}.content-user-item-all[data-v-205818db]{line-height:%?60?%;text-align:left;padding:0 %?5?%;font-size:%?24?%;color:#2c405a;border-bottom:%?1?% solid #2c405a;height:%?60?%;width:100%;background:#2c405a;color:#fff}.content-user-item[data-v-205818db]{height:%?40?%;text-align:left;font-size:%?24?%;color:#2c405a;line-height:%?50?%;padding:0 %?5?%;position:relative}.content-user-item[data-v-205818db]:hover{background:#2c405a}.btn-input[data-v-205818db]{position:fixed;width:100%;height:auto;left:0;bottom:0}.uni-common-mt[data-v-205818db]{\n\t/* padding-top: 200upx; */}.uni-form-item[data-v-205818db]{border:%?1?% solid #ccc;height:%?80?%;margin-bottom:%?20?%;line-height:%?80?%}.uni-form-item uni-input[data-v-205818db]{height:%?80?%;line-height:%?80?%;padding:0 %?20?%}.text-item[data-v-205818db]{width:calc(100% - %?20?%);line-height:%?50?%;color:#2c405a;padding:0 %?10?%;font-size:%?24?%;clear:both}\r\n/* .content-text-conr view:last-child{\n\tmargin-bottom: 60upx;\n} */.text-item-date[data-v-205818db]{margin-left:%?40?%}.text-item-uinfo[data-v-205818db]{width:100%;height:auto;overflow:hidden}.text-item-img[data-v-205818db]{width:%?30?%;height:%?30?%;margin:%?10?%;display:inline-block}.text-item-img uni-image[data-v-205818db]{width:100%;height:100%}.msg-l[data-v-205818db]{padding:%?10?% %?30?%;text-align:left;background:#ccc;color:#333;clear:both;border-radius:%?25?%;max-width:70%;word-wrap:break-word;line-height:%?40?%;width:auto;float:left;margin-left:%?40?%;position:relative}.text-item-r[data-v-205818db]{width:calc(100% - 10px);color:#2c405a;padding:0 %?5?%;font-size:%?24?%;margin:auto;height:auto;clear:both}.text-item-r-uinfo[data-v-205818db]{float:right}.text-item-r-img[data-v-205818db]{width:%?30?%;height:%?30?%;margin:%?10?%;display:inline-block;float:right}.text-item-r-img uni-image[data-v-205818db]{width:100%;height:100%}.msg-r[data-v-205818db]{clear:both;float:right;margin-right:%?40?%;position:relative;padding:%?10?% %?30?%;text-align:left;background:#ccc;color:#333;border-radius:%?25?%;max-width:70%;line-height:%?40?%;word-wrap:break-word}.msg-r[data-v-205818db]:before{content:"";position:absolute;top:%?-28?%;right:%?20?%;width:0;height:0;border-top:%?20?% solid rgba(0,0,0,0);border-right:%?5?% solid rgba(0,0,0,0);border-bottom:%?10?% solid #ccc;border-left:%?10?% solid rgba(0,0,0,0)}.msg-l[data-v-205818db]:before{content:"";position:absolute;top:%?-28?%;left:%?20?%;width:0;height:0;border-top:%?20?% solid rgba(0,0,0,0);border-right:%?10?% solid rgba(0,0,0,0);border-bottom:%?10?% solid #ccc;border-left:%?5?% solid rgba(0,0,0,0)}.text-msg[data-v-205818db]{clear:both}.msg-sysmsg[data-v-205818db]{clear:both;font-size:%?24?%;height:%?40?%;line-height:%?40?%;text-align:center;color:#999;width:100%}.text-item-all[data-v-205818db]:last-child{clear:both;margin-bottom:%?40?%;overflow:hidden}.content-user-item[data-v-205818db] .weidu-msg{width:%?30?%;height:%?30?%;border-radius:%?15?%;background:#007aff;display:inline-block;position:absolute;top:%?10?%;line-height:%?30?%;text-align:center;color:#fff;right:%?10?%}',""])}}]);